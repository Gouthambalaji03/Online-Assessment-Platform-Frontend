@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    @apply m-0 p-0 box-border;
  }

  body {
    @apply font-sans bg-surface text-text-primary min-h-screen text-base leading-relaxed antialiased;
  }

  h1 { @apply text-3xl font-bold leading-tight text-text-primary tracking-tight; }
  h2 { @apply text-2xl font-bold leading-snug text-text-primary; }
  h3 { @apply text-xl font-semibold leading-normal text-text-primary; }
  h4 { @apply text-base font-semibold leading-normal text-text-primary; }

  ::-webkit-scrollbar { @apply w-2 h-2; }
  ::-webkit-scrollbar-track { @apply bg-surface-secondary rounded; }
  ::-webkit-scrollbar-thumb { @apply bg-border-hover rounded; }
  ::-webkit-scrollbar-thumb:hover { @apply bg-text-light; }
}

@layer components {
  .btn-primary {
    @apply inline-flex items-center justify-center gap-2 py-3 px-6 rounded-lg font-semibold text-sm transition-all duration-200 cursor-pointer border-none bg-primary text-white hover:bg-primary-hover hover:-translate-y-0.5 hover:shadow-primary disabled:opacity-60 disabled:cursor-not-allowed disabled:transform-none;
  }

  .btn-secondary {
    @apply inline-flex items-center justify-center gap-2 py-3 px-6 rounded-lg font-semibold text-sm transition-all duration-200 cursor-pointer bg-card text-text-primary border border-border hover:bg-surface-secondary hover:border-border-hover disabled:opacity-60 disabled:cursor-not-allowed;
  }

  .btn-success {
    @apply inline-flex items-center justify-center gap-2 py-3 px-6 rounded-lg font-semibold text-sm transition-all duration-200 cursor-pointer border-none bg-success text-white hover:bg-success-dark disabled:opacity-60 disabled:cursor-not-allowed;
  }

  .btn-error {
    @apply inline-flex items-center justify-center gap-2 py-3 px-6 rounded-lg font-semibold text-sm transition-all duration-200 cursor-pointer border-none bg-error text-white hover:bg-error-dark disabled:opacity-60 disabled:cursor-not-allowed;
  }

  .btn-ghost {
    @apply inline-flex items-center justify-center gap-2 py-3 px-6 rounded-lg font-semibold text-sm transition-all duration-200 cursor-pointer bg-transparent text-error border border-error hover:bg-error-light disabled:opacity-60 disabled:cursor-not-allowed;
  }

  .btn-sm { @apply py-2 px-4 text-xs rounded-md; }
  .btn-lg { @apply py-4 px-8 text-base rounded-xl; }
  .btn-icon { @apply p-2.5 rounded-lg; }

  .card {
    @apply bg-card border border-border rounded-xl p-6 shadow-md transition-all duration-200;
  }

  .card-hover:hover {
    @apply border-border-hover shadow-lg;
  }

  .stat-card {
    @apply bg-card border border-border rounded-xl p-6 shadow-md transition-all duration-200 hover:border-border-hover hover:shadow-lg;
  }

  .input {
    @apply w-full bg-card border border-border rounded-lg py-3 px-4 text-text-primary text-base font-sans transition-all duration-200 placeholder:text-text-light focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/10;
  }

  .input-error {
    @apply border-error focus:border-error focus:ring-error/10;
  }

  .label {
    @apply block text-sm font-medium text-text-secondary mb-1.5;
  }

  .form-group {
    @apply flex flex-col gap-1.5;
  }

  .select {
    @apply w-full bg-card border border-border rounded-lg py-3 pl-4 pr-10 text-text-primary text-base font-sans transition-all duration-200 appearance-none cursor-pointer focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/10;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2364748B'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 12px center;
    background-size: 20px;
  }

  .textarea {
    @apply w-full bg-card border border-border rounded-lg py-3 px-4 text-text-primary text-base font-sans transition-all duration-200 min-h-[120px] resize-y placeholder:text-text-light focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/10;
  }

  .checkbox {
    @apply w-5 h-5 rounded border-2 border-border bg-card cursor-pointer accent-primary;
  }

  .badge {
    @apply inline-flex items-center gap-1 py-1 px-2.5 rounded-md text-xs font-semibold;
  }

  .badge-primary { @apply bg-primary-100 text-primary; }
  .badge-success { @apply bg-success-light text-success-dark; }
  .badge-error { @apply bg-error-light text-error-dark; }
  .badge-warning { @apply bg-warning-light text-warning-dark; }
  .badge-info { @apply bg-info-light text-info-dark; }
  .badge-neutral { @apply bg-surface-secondary text-text-muted; }

  .avatar {
    @apply w-10 h-10 rounded-lg bg-gradient-to-br from-primary to-primary-light flex items-center justify-center text-white font-semibold text-sm flex-shrink-0;
  }

  .avatar-sm { @apply w-8 h-8 text-xs rounded-md; }
  .avatar-lg { @apply w-14 h-14 text-lg rounded-xl; }
  .avatar-xl { @apply w-20 h-20 text-2xl rounded-2xl; }

  .sidebar-link {
    @apply flex items-center gap-3 py-3 px-4 rounded-lg text-text-secondary font-medium text-sm no-underline transition-all duration-200 hover:bg-surface-secondary hover:text-text-primary;
  }

  .sidebar-link.active {
    @apply bg-primary/10 text-primary;
  }

  .table-container {
    @apply bg-card border border-border rounded-xl overflow-hidden;
  }

  .table-header {
    @apply bg-surface-secondary py-3.5 px-5 font-semibold text-text-muted text-xs uppercase tracking-wider border-b border-border;
  }

  .table-row {
    @apply py-4 px-5 border-b border-border transition-colors duration-150 last:border-b-0 hover:bg-surface;
  }

  .modal-overlay {
    @apply fixed inset-0 bg-text-primary/60 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in;
  }

  .modal-content {
    @apply bg-card border border-border rounded-2xl p-8 max-w-lg w-[90%] max-h-[90vh] overflow-y-auto shadow-xl animate-slide-up;
  }

  .tab-group {
    @apply flex p-1 bg-surface-secondary rounded-lg gap-1;
  }

  .tab-item {
    @apply flex-1 py-2.5 px-4 rounded-md font-medium text-sm text-text-muted bg-transparent border-none cursor-pointer transition-all duration-150 flex items-center justify-center gap-2 hover:text-text-primary;
  }

  .tab-item.active {
    @apply bg-card text-text-primary shadow-sm;
  }

  .divider { @apply h-px bg-border my-6; }
  .divider-vertical { @apply w-px bg-border mx-4 self-stretch; }

  .exam-timer {
    @apply bg-text-primary text-white py-2.5 px-5 rounded-lg font-bold text-lg font-mono tabular-nums;
  }

  .exam-timer.warning { @apply bg-warning animate-pulse; }
  .exam-timer.danger { @apply bg-error animate-pulse; }

  .question-card {
    @apply bg-card border border-border rounded-xl p-7 shadow-md;
  }

  .question-nav-btn {
    @apply w-10 h-10 rounded-lg flex items-center justify-center font-semibold text-sm transition-all duration-150 border border-border bg-card text-text-secondary cursor-pointer hover:border-primary hover:text-primary;
  }

  .question-nav-btn.answered { @apply bg-success border-success text-white; }
  .question-nav-btn.current { @apply bg-primary border-primary text-white; }
  .question-nav-btn.flagged { @apply bg-warning border-warning text-white; }

  .option-btn {
    @apply w-full py-4 px-5 rounded-lg text-left transition-all duration-150 flex items-center gap-4 bg-card border-2 border-border cursor-pointer text-base text-text-primary hover:border-primary-light hover:bg-primary/5;
  }

  .option-btn.selected {
    @apply border-primary bg-primary-50;
  }

  .option-letter {
    @apply w-8 h-8 rounded-lg flex items-center justify-center font-semibold text-sm bg-surface-secondary text-text-muted flex-shrink-0;
  }

  .option-btn.selected .option-letter {
    @apply bg-primary text-white;
  }

  .proctoring-warning {
    @apply fixed top-5 right-5 bg-card border border-error p-4 rounded-xl z-50 shadow-xl animate-shake;
  }

  .progress-bar {
    @apply h-1 bg-border rounded-sm overflow-hidden;
  }

  .progress-bar-fill {
    @apply h-full bg-primary transition-all duration-300;
  }

  .data-card {
    @apply bg-card border border-border rounded-lg p-5;
  }

  .data-value { @apply text-3xl font-bold text-text-primary leading-tight; }
  .data-label { @apply text-sm font-medium text-text-muted mt-1; }

  .tooltip {
    @apply absolute z-50 py-2 px-3 text-xs font-medium text-white bg-text-primary rounded-md shadow-lg whitespace-nowrap;
  }

  .dropdown {
    @apply absolute z-40 bg-card border border-border rounded-lg shadow-xl py-1 min-w-[160px];
  }

  .dropdown-item {
    @apply w-full py-2.5 px-4 text-left text-sm text-text-secondary bg-transparent border-none cursor-pointer transition-all duration-150 hover:bg-surface-secondary hover:text-text-primary;
  }

  .empty-state {
    @apply flex flex-col items-center justify-center py-16 text-center;
  }

  .empty-state-icon { @apply w-16 h-16 text-text-light mb-4; }
  .empty-state-title { @apply text-lg font-semibold text-text-primary mb-2; }
  .empty-state-text { @apply text-sm text-text-muted max-w-sm; }

  .skeleton { @apply bg-surface-secondary rounded-md animate-pulse; }
  .skeleton-text { @apply h-4 w-full; }
  .skeleton-title { @apply h-6 w-3/4; }
  .skeleton-avatar { @apply w-10 h-10 rounded-lg; }
  .skeleton-card { @apply h-32 w-full rounded-xl; }

  .page-container { @apply max-w-7xl mx-auto px-4 py-8; }
  .page-header { @apply mb-8; }
  .page-title { @apply text-3xl font-bold text-text-primary mb-2; }
  .page-subtitle { @apply text-sm text-text-muted; }

  .glass-card {
    @apply bg-white/80 backdrop-blur-md border border-border rounded-xl p-6 shadow-lg;
  }

  .gradient-primary { @apply bg-gradient-to-br from-primary to-primary-light; }
  .gradient-surface { @apply bg-gradient-to-br from-surface to-surface-secondary; }
}

@layer utilities {
  .no-scrollbar::-webkit-scrollbar { display: none; }
  .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

  .text-balance { text-wrap: balance; }

  .truncate-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .truncate-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .gradient-text {
    @apply bg-gradient-to-r from-primary via-primary-light to-info bg-clip-text text-transparent;
  }

  .stack-sm { @apply flex flex-col gap-3; }
  .stack-md { @apply flex flex-col gap-4; }
  .stack-lg { @apply flex flex-col gap-6; }
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes slideUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  75% { transform: translateX(5px); }
}

.animate-fadeIn { animation: fadeIn 0.3s ease-out; }
.animate-slideUp { animation: slideUp 0.3s ease-out; }
.animate-shake { animation: shake 0.5s ease-in-out; }
